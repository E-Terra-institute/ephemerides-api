<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Конвертер часу</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="converter">
    <h2>Конвертер локального часу в UTC</h2>
    <div class="form-row">
      <label>
        Дата
        <input type="date" id="date" name="date" required>
      </label>
      <label>
        Час
        <input type="time" id="time" name="time" required>
      </label>
      <label>
        Часовий пояс
        <select id="timezone" name="tz" required>
          {% for tz in timezones %}
          <option value="{{ tz }}" {% if tz == "Europe/Kyiv" %}selected{% endif %}>{{ tz }}</option>
          {% endfor %}
        </select>
      </label>
    </div>
    <button onclick="convertToUTC()">Конвертувати</button>
    <div class="output" id="utc-result"></div>
  </div>

  <script>
    async function convertToUTC() {
      const date = document.getElementById('date').value;
      const time = document.getElementById('time').value;
      const tz   = document.getElementById('timezone').value;

      if (!date || !time || !tz) {
        document.getElementById('utc-result').textContent = 'Заповніть всі поля.';
        return;
      }

      const res = await fetch(`/api/convert-to-utc?date=${date}&time=${time}&tz=${tz}`);
      const data = await res.json();
      if (data.utc_time) {
        document.getElementById('utc-result').textContent = `Час у UTC: ${data.utc_time}`;
      } else {
        document.getElementById('utc-result').textContent = `Помилка: ${data.error}`;
      }
    }
  </script>
</body>
</html>
